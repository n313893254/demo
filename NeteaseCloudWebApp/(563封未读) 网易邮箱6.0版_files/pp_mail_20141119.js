(function(){var g=!!window.postMessage,w=window.yxHelper;function log(m){if(!!window.console){console.log(m)}else{}}var j=function(q){var r={},a=(q||"").split("&");for(var i=0,l=a.length,b,k;i<l;i++){b=(a[i]||"").split("=");if(!b||!b.length)continue;k=b.shift();r[decodeURIComponent(k)]=decodeURIComponent(b.join("="))}return r};var fW=function(e,n,h,c){if(!e.addEventListener){e.attachEvent("on"+n,h)}else{e.addEventListener(n,h,!!c)}};var o=function(a){var m={};window.setInterval(function(){var c=document.cookie,r,v,x,f;for(var k in a){x=m[k];r=new RegExp(k+"=(.+?)(?:;|$)","i");if(r.test(c)){v=RegExp.$1||"NULL";if(!v||v=="NULL"||x===v)continue;document.cookie=k+"=NULL;path=/";f=a[k];if(typeof f==="string")f=window[f];if(!!f)f.call(null,decodeURIComponent(v))}}},150)};var d=function(n,p){WebmailHelper.cross("parent",'$I("interface.AppInterface").yixin.'+n,p||{})};function u(a){var q="YX_ACT="+encodeURIComponent(a);!g?document.cookie=q+";path=/":document.getElementById("yxwrapper").contentWindow.postMessage(q,"*")}var s=function(q){if(!q)return;log("sync box -> "+q);d("setBox",j(q))};var y=function(i){if(!i)return;log("preimg -> "+i);d("previewImages",{images:[{original:i}]})};var z=function(t){var bZ=w.getICnfByType(t);if(!bZ)return;bZ.css.yxText=bZ.html;d("setWrapperStyle",bZ.css)};var A=function(q){if(q!="c")return;log("yixin body click");d("frameClick")};var Z=function(){var bZ=j(location.search.substr(1));WebmailHelper.init({cross:!0,host:bZ.host});window.setTimeout(function(){d("bodyClick",{call:{isFunction:true,func:"function(o){netease.mail.api.Cross.call.yixinCall(o);}"},yixinCall:{isCallback:true,name:"a2m"},B:"ifrmYixin"})},500);var cm={YX_DAT:s,YX_ICN:z,YX_TST:A,YX_IMG:y};if(g){fW(window,"message",function(e){if(e.origin.indexOf("yixin.im")<0||!e.data)return;var a=e.data.split("="),f=cm[a[0]];if(typeof f==="string")f=window[f];if(!!f)f.call(null,decodeURIComponent(a[1]))})}else{o(cm)}};window.a2m=function(){log("mail body click");u("min")};Z()})()