(function(oWin,oDoc){var InternetHelper={ajax:fAjax};oWin.oneTJ={version:"1.0.0",countly:{src:"https://mimg.127.net/p/tools/countly/countly_16.06_1.0.min.js",url:"https://countly.mail.163.com/countly",interval:500},devHosts:["localhost","demo.mail.163.com"],appKey:{web:"dbtqm9v2pirbn3wuszblmxpvd1jwcilvesnf5yyo3emi",mobile:"rtuihvdbcvawc38bxbnjxbrza1ppshnj3wza4lakojdt"},userInfoApi:"/api/info/userInfo.do",serverTimeApi:"/kpimission/sysinfo.jsp?callback=",mobileMaxWidth:768,mobileUAReg:/iphone|android|blackberry|windows phone|nokia|bb\d+/i,init:fInit,initClient:fInitClient,initVer:fInitVer,initCID:fInitCID,initIsDev:fInitIsDev,isAvailable:fIsAvailable,getServerTime:fGetServerTime,getCID:fGetCID,initCountly:fInitCountly,initGlobalEvents:fInitGlobalEvents,getSDK:fGetSDK,onSDKReady:fOnSDKReady,pv:fPV,click:fClick,event:fEvent,rawEvent:fRawEvent,save:fSave,send:fSend,filter:fFilter};
return oWin.oneTJ;function fInit(oConf){this.config=oConf||{};this.activity=oConf.activity||"unknown_activity";this.client=this.initClient();this.ver=this.initVer();
this.isRelease=!this.initIsDev();this.cid=this.initCID();this.isLogin=this.cid!="";this.isInited=false;this.fixTime=0;this.countly.src=oConf.src?oConf.src:this.countly.src;
this.countly.app_key=this.appKey[this.client];this.countly.url=oConf.url?oConf.url:this.countly.url;this.countly.interval=oConf.interval?oConf.interval:this.countly.interval;
var Countly=oWin.Countly=oWin.Countly||{};Countly.q=Countly.q||[];if(this.isRelease&&this.isAvailable()){this.getServerTime();if(this.isLogin){this.initCountly();
}else{this.getCID();}}}function fInitClient(){var oConf=this.config;var sHost=oWin.location.hostname;if(oConf.client){return oConf.client;}else{if(/^m\./i.test(sHost)){return"mobile";
}else{var sUA=window.navigator.userAgent;if(window.screen.width<=this.mobileMaxWidth||this.mobileUAReg.test(sUA)){return"mobile";}else{return"web";}}}}function fInitVer(){var oConf=this.config;
if(oConf.ver){return oConf.ver;}else{if(this.client=="mobile"){return"wap";}else{return"";}}}function fIsAvailable(){var sUA=navigator.userAgent;return !/MSIE [6-8]/.test(sUA);
}function fInitCID(){var oConf=this.config;if(oConf.cid){return oConf.cid=="0"?"":oConf.cid;}else{return"";}}function fInitIsDev(){var oConf=this.config;
var sUrl=oWin.location.href;var oHosts=this.devHosts;if(oConf.isDev===undefined){for(var cnt=0,length=oHosts.length;cnt<length;cnt++){var sHost=oHosts[cnt];
var oRegExp=new RegExp(sHost);if(oRegExp.test(sUrl)){return true;}}return false;}else{return !!oConf.isDev;}}function fGetServerTime(){var that=this;var sCallback="jsonp_callback_"+(new Date().getTime());
var oScript=document.createElement("script");var sSrc=that.serverTimeApi+sCallback;document.documentElement.appendChild(oScript);window[sCallback]=function(oRespond){that.fixTime=(new Date().getTime())-oRespond.ts;
};oScript.src=sSrc;}function fGetCID(){var that=this;InternetHelper.ajax(that.userInfoApi,{success:function(oRespondText){var oRespond=null;try{oRespond=JSON.parse(oRespondText);
}catch(e){oRespond=eval(oRespondText);}if(oRespond.code!==undefined){if(oRespond.code==200){that.cid=oRespond.result.pid;}else{if(oRespond.code==203){that.isLogin=false;
}else{that.isLogin=false;}}}that.initCountly();},error:function(){that.isLogin=false;that.initCountly();}});}function fInitCountly(){var Countly=oWin.Countly;
Countly.app_key=this.countly.app_key;Countly.url=this.countly.url;Countly.interval=this.countly.interval;Countly.cid=this.cid;this.initGlobalEvents();this.getSDK();
}function fInitGlobalEvents(){}function fGetSDK(){var that=this;(function(){var cly=document.createElement("script");cly.type="text/javascript";cly.async=true;
cly.src=that.countly.src;cly.onload=function(){that.onSDKReady();};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(cly,s);})();
}function fOnSDKReady(){this.filter();oWin.Countly.init();this.isInited=true;}function fPV(sPageName,oParams){oParams=oParams||{};oParams.type="pv";oParams.name=sPageName||"main";
if(this.cid){oParams.cid=this.cid;}this.rawEvent(oParams);}function fClick(sClickName,oParams,oDom){oParams=oParams||{};oParams.type="click";oParams.name=sClickName||"unknown_name";
this.rawEvent(oParams);}function fEvent(sEventName,oParams,oDom){oParams=oParams||{};oParams.type=oParams.type||"unknown_type";oParams.name=sEventName||"unknown_name";
this.rawEvent(oParams);}function fRawEvent(oParams){var oSegmentation={client:this.client,serverTime:(new Date().getTime())-this.fixTime};if(this.client=="mobile"){oSegmentation.ver=this.ver;
}if(this.cid!=""){oSegmentation.cid=this.cid;}for(var sKey in oParams){if(oParams.hasOwnProperty(sKey)){oSegmentation[sKey]=oParams[sKey];}}var oRawParams={key:this.activity,segmentation:oSegmentation};
this.save(oRawParams);}function fSave(oParams){var that=this;if(that.isInited){oWin.Countly.add_event(oParams);}else{oWin.Countly.q.push(["add_event",oParams]);
}}function fSend(fCallback){if(this.isRelease&&oWin.Countly){oWin.Countly.send(true,fCallback);}}function fFilter(){for(var cnt=0,length=Countly.q.length;
cnt<length;cnt++){var oEvent=(oWin.Countly.q[cnt])[1];oEvent.segmentation.serverTime-=this.fixTime;if(oEvent.segmentation.type=="pv"&&this.cid&&!oEvent.segmentation.cid){oEvent.segmentation.cid=this.cid;
}}}function fAjax(sURL,oParams){oParams=oParams||{};var fSuc=oParams.success;var fErr=oParams.error;var oData=oParams.data||{};var that=this;var oHttp=createXMLHttp();
var sRequestURL=sURL;sRequestURL+="?_="+(new Date()).getTime();if(oData){var isFirst=true;for(var sKey in oData){if(oData.hasOwnProperty(sKey)){sRequestURL+="&"+sKey+"="+encodeURIComponent(oData[sKey]);
isFirst=false;}}}oHttp.open("GET",sRequestURL,true);oHttp.onreadystatechange=function(){if(oHttp.readyState==4){if(oHttp.status>=200&&oHttp.status<400){fSuc&&fSuc.call(that,oHttp.responseText);
}else{fErr&&fErr.call(that,oHttp.status,oHttp.responseText);}}};oHttp.send();function createXMLHttp(){if(window.ActiveXObject){var aVersions=["MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"];
for(var i=0;i<aVersions.length;i++){try{return new ActiveXObject(aVersions[i]);}catch(e){continue;}}}else{if(window.XMLHttpRequest){return new XMLHttpRequest();
}}}}})(window,document);