<template lang="html">
  <div class="body">
    <div class="flipbook-viewport">
      <div class="container">
        <div class="flipbook">
          <div class="page">
            <p>我生长在穷乡僻壤的小村子，从小就喜欢涂鸦。家门口的晒谷场，就是我的大画板;随手拾来的木炭瓦片，
              就是我的画具。见鸡画鸡，见狗画狗，我曾在晒谷场上画过牛耕田，画过牵长线放纸鹞。</p>
            <p>我和哥哥和一位堂叔会画炭相，但我觉得黑漆的炭相不好看。一次弄来一小块他们画炭相用的“飞马纸”，
              便是用这块洁白的洋纸画一只大雄鸡。春节刚过，家家户户都贴有红对联，于是我冒着风险撕下邻舍的一块红纸，
              企图泡出点红颜色用来画雄鸡的鸡冠。此外，我还发现水瓜叶可以挤出绿色汁液;妈妈上山砍柴时又求她为我摘回一些当黄色用的梔子;
              有时为了要画多种颜色的花纸鹞，又用土块和石头磨出各种各样色彩的粉末当颜料。</p>
          </div>
          <div class="page">
            <h1>绘事话童年</h1>
            <p>我生长在穷乡僻壤的小村子，从小就喜欢涂鸦。家门口的晒谷场，就是我的大画板;随手拾来的木炭瓦片，
              就是我的画具。见鸡画鸡，见狗画狗，我曾在晒谷场上画过牛耕田，画过牵长线放纸鹞。</p>
            <p>我和哥哥和一位堂叔会画炭相，但我觉得黑漆的炭相不好看。一次弄来一小块他们画炭相用的“飞马纸”，
              便是用这块洁白的洋纸画一只大雄鸡。春节刚过，家家户户都贴有红对联，于是我冒着风险撕下邻舍的一块红纸，
              企图泡出点红颜色用来画雄鸡的鸡冠。此外，我还发现水瓜叶可以挤出绿色汁液;妈妈上山砍柴时又求她为我摘回一些当黄色用的梔子;
              有时为了要画多种颜色的花纸鹞，又用土块和石头磨出各种各样色彩的粉末当颜料。</p>
              <p>我家是所谓书香世代的破落户，家里有个破败的小花园。家乡叫果园村，我小时候村里到处都是花果树，
                其中有两人合抱不过来的菠萝蜜、人面果。在我家花园里还有百年荔枝树和两棵古白梅，父亲还亲手植了不少幽兰与修竹，
                园门口的夜兰花棚悬挂着一副竹刻的对联:“为室因树，补屋牵萝。
                ”父亲读书会客的小书舍，就盖在荔枝树的旁边。总之，破旧的环境还十分雅致，书香、诗味和画意都很浓。</p>
          </div>
          <div class="page">
            <p>父亲虽然没有赶上考科举，但却是一位有文学修养的小学教师。他曾写过不少诗，也会画几笔梅、兰、菊、竹四君子为题材的文人画。
              在我八九岁的时候，才跟随着父亲念书，他在哪里应聘，我就在哪里就读，最远的两处地方我记得是小渔港溪头镇和奋兴小学所在的织贡圩。
              在奋兴小学念书的时候我已十一二岁了。当时随父亲住在小房间里，见他画画时我也偷偷地临仿，可是他一见我画画</p>
              <div class="center">
                <img src="http://121.40.46.137/guanshanyue/assets/img/beditor_upload/20160805/1470375818127692.png" alt="">
              </div>
          </div>
          <div class="">TrySail是日本的声优组合，由Music Ray’n事务所所属的三名女声优麻仓桃、雨宫天、夏川椎菜组成。
            TrySail将出席在今年的「Animelo Summer Live 2017 -THE CARD-」演唱会，登场时间为8月27日。</div>
          <div class="">七月新番『咕噜咕噜魔法阵』ED单曲封面公开</div>
          <div class="">月番『咕噜咕噜魔法阵』是由卫藤ヒロユキ原著的漫画改编，
            动画由Production I.G负责制作。本作的ED是由TECHNOBOYS PULCRAFT GREEN-FUNDfeat.Bonjour铃木组合演唱，歌名叫做
            单曲CD的发售日期为今年8月9日，
            近日官方公布了单曲CD的封面以及艺术照。单曲封面是动画『咕噜咕噜魔法阵』插图，
            而艺术照则是演唱组合的照片。</div>
          <div class="">『咕噜咕噜魔法阵』简介：被勇者迷父母养育成长的少年·尼克，某天，
            父母得知了哥达国国王为了讨伐魔王而募集勇者一事，于是尼克被勇者迷父母说着“到出发旅行的日子了！
            ”而强行展开了旅程。尼克按照村子的惯例，在旅行前前往村子边缘的怪人魔法婆婆家里，
          </div>
          <div class="">  并在那里遇见了使用名为“咕噜咕噜”的不可思议魔法的少女·柯柯丽……。略显轻率的尼克和不谙世事天真烂漫的柯柯丽，
            以及在这样的两人的旅途中加以点缀的独特而具魅力的同伴们。
            尽情欢笑，偶尔哭泣。令人心动不已，满溢勇气与感动的王道冒险幻想剧，现在开幕。</div>
        </div>
      </div>
    </div>
    <div class="cd-transition-layer">
      <div class="bg-layer"></div>
    </div>
    <div class="menu-wrapper-right">
      <div class="menu">
        <div class="button" @click="pageBack()"><img src="../assets/src/Details_14.png"></div>
      </div>
    </div>
  </div>
</template>

<script>
import $ from 'jquery'
import turn from '../ignore_lib/turn.min'

export default {
  name: 'ArticleDetail',
  methods: {
    pageBack () {
      this.$router.back()
    }
  },
  created: function () {
    this.$store.commit('setMenuBarSeen', false)
  },
  mounted: function () {
    console.log($('.poi'))
    console.log(turn)
    // 泼墨效果
    var transitionLayer = $('.cd-transition-layer')
    transitionLayer.addClass('closing')
    transitionLayer.addClass('visible opening')
    setTimeout(function () {
      transitionLayer.addClass('no-cssanimations')
    }, 3000)

    // 翻书效果
    $('.flipbook').turn({
      width: 88 + 'vw',
      height: 72 + 'vh',
      elevation: 10,
      gradients: true,
      autoCenter: false,
      acceleration: true,
      page: 2,
      turnCorners: 'all'
    })
    // var delay = ($('.no-cssanimations').length > 0) ? 0 : 600

    // function setLayerDimensions () {
    //   let windowWidth = $(window).width()
    //   let windowHeight = $(window).height()
    //   let layerHeight
    //   let layerWidth
    //
    //   if (windowWidth / windowHeight > frameProportion) {
    //     layerWidth = windowWidth
    //     layerHeight = layerWidth / frameProportion
    //   } else {
    //     layerHeight = windowHeight * 1.2
    //     layerWidth = layerHeight * frameProportion
    //   }
    //   transitionBackground.css({
    //     'width': layerWidth * frames + 'px',
    //     'height': layerHeight + 'px'
    //   })
    // }
  }
}
</script>

<style lang="css" scoped>
.body {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}
.flipbook-viewport {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
.flipbook-viewport .container {
  background-image: url('../assets/bg/article-bg.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  width: 100%;
  height: 100%;

  display: flex;
  justify-content: center;
  align-items: center;
}
.flipbook-viewport .page {
  background: white;
}
.flipbook-viewport .page h1 {
  padding: 2vh 2vw;
  text-align: center;
}
.flipbook-viewport .page p {
  text-indent: 2em;
  line-height: 240%;
  margin: 1vh 2vw;
}
.flipbook-viewport .page .center {
  display: flex;
  justify-content: center;
}
/* Transition layer */
.cd-transition-layer {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 2;
  width: 100%;
  height: 100%;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
}
.cd-transition-layer .bg-layer {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translateY(-50%) translateX(-2%);
  height: 100%;
  width: 2500%;
  background: url('http://omph2coqc.bkt.clouddn.com/17-7-31/72171056.jpg') no-repeat 0 0;
  background-size: 100% 100%;
}
.cd-transition-layer.visible {
  opacity: 1;
  visibility: visible;
}
.cd-transition-layer.opening .bg-layer {
  -webkit-animation: cd-sequence 2s steps(24);
  animation-fill-mode: forwards;
}
.cd-transition-layer.closing .bg-layer {
  -webkit-animation: cd-sequence-reverse 2s steps(24);
  animation-fill-mode: forwards;
}
.no-cssanimations.cd-transition-layer {
  display: none;
}
@-webkit-keyframes cd-sequence {
  0% {
    transform: translateY(-50%) translateX(-2%);
  }
  100% {
    transform: translateY(-50%) translateX(-98%);
  }
}
@-webkit-keyframes cd-sequence-reverse {
  0% {
    transform: translateY(-50%) translateX(-98%);
  }
  100% {
    transform: translateY(-50%) translateX(-2%);
  }
}
</style>
